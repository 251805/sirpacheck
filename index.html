<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pagbilao Weather Dashboard</title>

  <!-- Tailwind CDN for quick styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root{
      --primary:#f59e0b;
      --bg:#f8fafc;
      --coastal:#f59e0b;
    }
    html,body{height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue";background:var(--bg);padding:1rem;-webkit-font-smoothing:antialiased;}
    .card{background:white;border-radius:1rem;box-shadow:0 8px 28px rgba(15,23,42,0.06);padding:1rem;}
    header .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(90deg,#ffecb3,#ffd54f);display:flex;align-items:center;justify-content:center;font-weight:800;color:#6b21a8;}
    .icon-yellow{color:var(--primary)}
    .marquee{background:var(--coastal);color:#080808;padding:10px;font-weight:700;position:fixed;left:0;right:0;bottom:0;z-index:60;}
    .marquee span{display:inline-block;white-space:nowrap;animation:marquee 22s linear infinite;}
    @keyframes marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}
    .hourly-scroll::-webkit-scrollbar{height:6px}
    .hourly-scroll::-webkit-scrollbar-thumb{background:var(--primary);border-radius:4px}
    .sat-thumb.selected{border:3px solid var(--coastal);opacity:1;}
    .sat-thumb{opacity:0.75;cursor:pointer;transition:all .15s}
    .kv{font-weight:700;font-size:1.25rem;}
    .small-muted{color:#6b7280;font-size:.85rem;}
    @media (min-width:1024px){body{padding:2rem}}
  </style>
</head>
<body class="flex flex-col items-center">

  <!-- App container -->
  <div id="app" class="w-full max-w-5xl pb-32">


  <!-- Top Header -->
<div class="card mb-6 p-4 md:p-6 flex flex-col md:flex-row items-center justify-between gap-6">
  <!-- Left Section: Logos and Title -->
  <div class="flex items-center gap-4">
    <!-- Left Logo -->
    <img 
      src="https://raw.githubusercontent.com/251805/sirpacheck/main/mdrrmo%20pag.png" 
      alt="MDRRMO Pagbilao Logo" 
      class="w-14 h-14 object-contain"
    />

    <!-- Title and Coordinates -->
    <div class="text-center md:text-left">
      <h1 class="text-2xl md:text-3xl font-extrabold text-gray-800">
        MDRRMO Pagbilao <span class="text-blue-600">Weather Dashboard</span>
      </h1>
      <div class="small-muted font-medium text-gray-600">
        Municipality of Pagbilao, Quezon â€” 13.9714Â°N, 121.6869Â°E
      </div>
    </div>

    <!-- Right Logo -->
    <img 
      src="https://raw.githubusercontent.com/251805/sirpacheck/main/pag%20logo.png" 
      alt="Pagbilao Municipal Logo" 
      class="w-14 h-14 object-contain"
    />
  </div>

  <!-- Right Section: Source Info -->
  <div class="text-center md:text-right small-muted">
    <div class="font-semibold text-gray-700">Sources:</div>
    <div>PAGASA Â· Windy Â· Open-Meteo</div>
    <div id="last-updated" class="text-sm mt-1 italic">Updated: â€”</div>
  </div>
</div>



    <!-- Current conditions + hourly -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">

      <!-- Current conditions -->
      <section id="current-panel" class="card p-4">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2"><i data-lucide="calendar-check" class="w-5 h-5 icon-yellow"></i> Current Weather Conditions</h2>
          <div class="small-muted">Local time: <span id="local-time">â€”</span></div>
        </div>

        <div id="current-data" class="grid grid-cols-2 md:grid-cols-4 gap-3">
          <!-- populated by JS -->
        </div>

        <div class="mt-4 small-muted">
          <strong>ğŸŒ¥ï¸UV Index (today):</strong> <span id="uv-index">â€”</span>
        </div>
     <strong> <div class="mt-4 small-muted">ğŸŒ¤ï¸UV Max:</strong> <span id="uv-max">â€”</span></div>
      </section>

      <!-- Hourly forecast -->
      <section class="card p-4">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2"><i data-lucide="clock" class="w-5 h-5 icon-yellow"></i> Hourly (next 24h) ğŸŒ¡ï¸Temp | ğŸŒ§ï¸Rain Chance |â˜ï¸Cloud Cover|ğŸŒ¬ï¸Wind|ğŸ’§Humidity </h2>
          <div class="small-muted">Updated every 2 hours</div>
        </div>

        <div id="hourly-forecast" class="flex overflow-x-auto hourly-scroll gap-3 pb-3">
          <!-- hourly cards -->
        </div>
      </section>

    </div>

    <!-- Coastal center -->
    <div class="card mb-6 p-4">
      <header class="flex items-center justify-between mb-4">
        <div>
          <h2 class="text-2xl font-bold">Pagbilao High and Low <span style="color:var(--coastal)">Tide Data</span></h2>
          <div class="small-muted">Tides, sunrise and sunset</div>
        </div>
       
       
       <div class="mt-3 space-y-1 text-center">
  <a 
    href="https://www.tide-forecast.com/locations/Pagbilao/tides/latest" 
    target="_blank" 
    class="font-bold text-blue-600 underline hover:text-blue-800"
  >
    ğŸŒŠ Tides full data ğŸŒŠ
  </a>
</div>

       
       
       
       
       
      </header>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
        <!-- Tides iframe -->
        <div>
          <h3 class="font-semibold mb-2">Tide Charts</h3>
          <div style="height:320px" class="overflow-hidden rounded-md border">
            <iframe 
              src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTSjbOrTAfSXraI2IFkerl2nC4ks8ICcpT9omyK2LRz8R5jKw5bf-2Zl5_zhNbo0F5u0q5Aqm8AWRZh/pubhtml?gid=0&single=true&widget=true&headers=false" 
              width="100%" height="100%" frameborder="0" loading="lazy"></iframe>
          </div>
        </div>

        <!-- Sunrise / sunset -->
        <div>
          <h3 class="font-semibold mb-2">ğŸŒ…Sunrise / ğŸŒ‡Sunset</h3>
          <div id="sun-times" class="grid grid-cols-2 gap-3">
            <!-- populated by JS -->
          </div>
          
        </div>
      </div>
    </div>

    <!-- Map + satellite -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
      <!-- Windy / map -->
      <div class="card p-0 overflow-hidden">
        <iframe title="Wind / Map" src="https://embed.windy.com/embed2.html?lat=13.972&lon=121.687&detailLat=13.972&detailLon=121.687&width=650&height=450&zoom=11&level=surface&overlay=wind&product=ecmwf&menu=&message=true&marker=true&calendar=now&pressure=true&type=map&location=coordinates&detail=true&metricWind=default&metricTemp=default&radarRange=-1" class="w-full h-96 lg:h-[560px] border-0"></iframe>
      </div>

      <!-- Satellite + timelapse -->
      <div class="card p-4">
        <h3 class="text-lg font-bold mb-2">Satellite Timelapse (Himawari)</h3>

        <div id="satellite" class="text-center">
          <img id="sat-main" src="" alt="Satellite" class="mx-auto rounded-lg shadow-md w-full max-w-[480px]"/>
          <div id="sat-msg" class="small-muted mt-2">Loading satellite...</div>

          <div class="flex items-center justify-center gap-2 mt-4">
            <button id="sat-play" class="px-3 py-2 rounded-md bg-yellow-400 font-semibold">â–¶ Play</button>
            <button id="sat-pause" class="px-3 py-2 rounded-md bg-gray-200">â¸ Pause</button>
            <label class="small-muted">Speed:
              <select id="sat-speed" class="ml-2 border rounded px-2 py-1">
                <option value="800">1x (0.8s)</option>
                <option value="120">3x (0.3s)</option>
              </select>
            </label>
          </div>

<div class="mt-3 space-y-1">
          ğŸ“¢ <a href="https://www.pagasa.dost.gov.ph/weather/weather-advisory" target="_blank" class="text-blue-600 underline">PAGASA Weather Advisory</a><br>
          ğŸ“¢ <a href="https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin/1" target="_blank" class="text-red-600 underline">PAGASA Severe Weather Bulletin</a>
        </div>


          <div id="timethumbs" class="flex flex-wrap gap-2 justify-center mt-3"></div>
        </div>
      </div>
    </div>

    <!-- Barangay Weather Section -->
    <section class="card mb-6 p-4">
      <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
        <i data-lucide="map-pin" class="w-6 h-6 icon-yellow"></i>
        Barangay Weather Update
      </h2>

      <div id="barangay-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Barangay cards populated by JS -->
      </div>
    </section>

  </div>


 <!-- Sticky Disclaimer Footer -->
  <footer class="fixed bottom-10 left-0 right-0 z-40 bg-white/90 backdrop-blur border-t border-gray-200 shadow-md text-center text-sm text-gray-700 py-3">
    <div class="flex flex-col md:flex-row items-center justify-center gap-2 px-4">
      <i data-lucide="info" class="w-4 h-4 text-blue-500"></i>
      <p class="max-w-2xl">
        <span class="font-semibold">Disclaimer:</span> This weather dashboard is for 
        <span class="font-bold">informational purposes only</span>. 
        Some data are gathered from <span class="font-semibold">public online sources</span> 
        and may not always reflect real-time conditions. For verified updates, please refer to 
        <span class="font-bold">PAGASA</span> or <span class="font-bold">MDRRMO Pagbilao</span>.
      </p>
    </div>
  </footer>


  <!-- Hotline marquee -->
  <div class="marquee">
    <span>ğŸ“ HOTLINES â€” MDRRMO 09186244564 | ğŸš’ BUMBERO 09234424945 | ğŸ‘® PULIS 09985985764 | ğŸ› LGU PAGBILAO (042) 797-0937</span>
  </div>

  <!-- JS: Data fetching + rendering -->
  <script type="module">
    const OPEN_METEO_URL = 'https://api.open-meteo.com/v1/forecast?latitude=13.9669&longitude=121.6984&daily=sunrise,sunset,uv_index_max&hourly=temperature_2m,rain,relativehumidity_2m,wind_speed_10m,wind_direction_10m,cloudcover,precipitation_probability&timezone=Asia%2FSingapore&forecast_days=2';
    const SAT_BASE = 'https://src.meteopilipinas.gov.ph/repo/mtsat-colored/24hour/';
    const SAT_FRAMES = 24;
    const SAT_THUMBS = 6;
    const WEATHER_UPDATE_MS = 1000 * 60 * 60 * 2;
    const SAT_UPDATE_MS = 1000 * 60 * 10;

    const lastUpdated = document.getElementById('last-updated');
    const localTime = document.getElementById('local-time');
    const currentData = document.getElementById('current-data');
    const uvIndexEl = document.getElementById('uv-index');
    const uvMaxEl = document.getElementById('uv-max');
    const hourlyContainer = document.getElementById('hourly-forecast');
    const sunTimesEl = document.getElementById('sun-times');
    const satMain = document.getElementById('sat-main');
    const satMsg = document.getElementById('sat-msg');
    const timethumbs = document.getElementById('timethumbs');
    const satPlay = document.getElementById('sat-play');
    const satPause = document.getElementById('sat-pause');
    const satSpeed = document.getElementById('sat-speed');

    let satImages = [];
    let satIndex = 0;
    let satTimer = null;
    let satDelay = parseInt(satSpeed.value);

    function fmtTimeISO(s){try{return new Date(s).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}catch(e){return'â€”'}}
    function statCard(title, value, desc=''){return`<div class="p-3 rounded-lg border border-gray-100 bg-white shadow-sm text-center"><div class="small-muted text-xs">${title}</div><div class="kv mt-1">${value}</div><div class="small-muted mt-1">${desc}</div></div>`}

    async function fetchWeather(){
      try{
        const r = await fetch(OPEN_METEO_URL + '&_=' + Date.now());
        if(!r.ok) throw new Error('Weather API error '+r.status);
        return await r.json();
      }catch(err){
        console.error('Weather fetch failed', err);
        return null;
      }
    }

    function renderWeather(data){
      if(!data) return;
      const now = new Date();
      lastUpdated.textContent = 'Updated: ' + now.toLocaleString();
      localTime.textContent = now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});

      const hourly = data.hourly || {};
      const daily = data.daily || {};
      const tIndex = 0;
      const temp = hourly.temperature_2m ? Math.round(hourly.temperature_2m[tIndex])+'Â°C' : 'â€”';
      const humid = hourly.relativehumidity_2m ? Math.round(hourly.relativehumidity_2m[tIndex])+'%' : 'â€”';
      const wind = hourly.wind_speed_10m ? (hourly.wind_speed_10m[tIndex].toFixed(1)+' km/h') : 'â€”';
      const dir = hourly.wind_direction_10m ? Math.round(hourly.wind_direction_10m[tIndex])+'Â°' : 'â€”';
      const clouds = hourly.cloudcover ? Math.round(hourly.cloudcover[tIndex])+'%' : 'â€”';
      const rainChance = hourly.precipitation_probability ? Math.round(hourly.precipitation_probability[tIndex])+'%' : (hourly.rain && hourly.rain[tIndex] > 0 ? 'Likely' : 'â€”');

      const uv = daily.uv_index_max && daily.uv_index_max.length ? daily.uv_index_max[0] : 'â€”';
      uvIndexEl.textContent = uv;
      uvMaxEl.textContent = uv;

      currentData.innerHTML = '';
      currentData.insertAdjacentHTML('beforeend', statCard('Temperature', temp, 'Current air temperature'));
      currentData.insertAdjacentHTML('beforeend', statCard('Humidity', humid, 'Relative humidity'));
      currentData.insertAdjacentHTML('beforeend', statCard('Wind', wind, `Dir: ${dir}`));
      currentData.insertAdjacentHTML('beforeend', statCard('Cloud / Rain', `${clouds} / ${rainChance}`, 'Cloud cover / Rain chance'));

      hourlyContainer.innerHTML = '';
      if(hourly.time && hourly.time.length){
        const start = 1;
        const end = Math.min(start + 24, hourly.time.length);
        for(let i=start;i<end;i++){
          const time = new Date(hourly.time[i]);
          const tStr = time.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
          const dStr = time.toLocaleDateString([], {weekday:'short'});
          const tTemp = hourly.temperature_2m ? Math.round(hourly.temperature_2m[i])+'Â°C' : 'â€”';
          const tHum = hourly.relativehumidity_2m ? Math.round(hourly.relativehumidity_2m[i])+'%' : 'â€”';
          const tWind = hourly.wind_speed_10m ? hourly.wind_speed_10m[i].toFixed(1)+' km/h' : 'â€”';
          const tCloud = hourly.cloudcover ? Math.round(hourly.cloudcover[i])+'%' : 'â€”';
          const tRain = hourly.precipitation_probability ? Math.round(hourly.precipitation_probability[i])+'%' : (hourly.rain && hourly.rain[i]>0 ? 'Likely' : 'â€”');

          const card = document.createElement('div');
          card.className = 'flex-shrink-0 w-36 p-3 rounded-xl bg-white border border-gray-100 shadow-sm text-left';
          card.innerHTML = `<div class="text-sm font-semibold">${tStr}</div><div class="small-muted text-xs mb-2">${dStr}</div><div class="kv">${tTemp}</div><div class="small-muted mt-1">${tRain} Â· ${tCloud} Â· ${tWind}</div><div class="small-muted text-xs mt-2">Humid: ${tHum}</div>`;
          hourlyContainer.appendChild(card);
        }
      }
      lucide.createIcons();
    }

    function renderSunTimes(data){
      if(!data || !data.daily) return;
      const sunrise = data.daily.sunrise && data.daily.sunrise.length ? fmtTimeISO(data.daily.sunrise[0]) : 'â€”';
      const sunset  = data.daily.sunset  && data.daily.sunset.length  ? fmtTimeISO(data.daily.sunset[0])  : 'â€”';
      sunTimesEl.innerHTML = `
        <div class="p-3 rounded-md bg-white border shadow-sm text-center"><div class="small-muted">Sunrise</div><div class="kv mt-1">${sunrise}</div></div>
        <div class="p-3 rounded-md bg-white border shadow-sm text-center"><div class="small-muted">Sunset</div><div class="kv mt-1">${sunset}</div></div>`;
    }

    async function refreshWeather(){
      const data = await fetchWeather();
      if(data){renderWeather(data);renderSunTimes(data);}
    }

    // ---------------- Satellite ----------------
    function satUrl(i){return SAT_BASE + i + '-him-colored.png?t=' + Date.now();}
    function buildSatFrames(){
      satImages = [];
      for(let i=1;i<=SAT_FRAMES;i++) satImages.push(satUrl(i));
      timethumbs.innerHTML = '';
      const step = Math.ceil(SAT_FRAMES / SAT_THUMBS);
      for(let j=0;j<SAT_THUMBS;j++){
        const idx = j*step;
        const img=document.createElement('img');
        img.src=satImages[idx];
        img.width=64;img.height=64;
        img.alt=`Satellite frame ${idx}`;
        img.className=`sat-thumb rounded`;
        img.addEventListener('click',()=>{showSatFrame(idx);pauseSat();});
        timethumbs.appendChild(img);
      }
      showSatFrame(0);
    }

    function showSatFrame(idx){
      satIndex=idx%satImages.length;
      satMain.src=satImages[satIndex];
      const thumbs=timethumbs.querySelectorAll('img');
      thumbs.forEach((t,i)=>t.classList.toggle('selected',Math.floor(satIndex/Math.floor(SAT_FRAMES/SAT_THUMBS))===i));
    }

    function playSat(){
      if(satTimer) return;
      satTimer=setInterval(()=>{satIndex=(satIndex+1)%satImages.length;showSatFrame(satIndex);},satDelay);
    }
    function pauseSat(){clearInterval(satTimer);satTimer=null;}
    satPlay.addEventListener('click',()=>{playSat();});
    satPause.addEventListener('click',()=>{pauseSat();});
    satSpeed.addEventListener('change',()=>{satDelay=parseInt(satSpeed.value);if(satTimer){pauseSat();playSat();}});

    async function refreshSatellite(){
      try{buildSatFrames();satMsg.textContent='';}catch(e){satMsg.textContent='Satellite not available';console.error(e);}
    }

    // ---------------- Barangay Section ----------------
    const barangays = [
      { name: "AÃ±ato", lat: 14.0042, lon: 121.6572 },
      { name: "Alupaye", lat: 13.9473, lon: 121.6697 },
      { name: "Antipolo", lat: 13.9868, lon: 121.6648 },
      { name: "Bagumbungan Iba", lat: 13.9995, lon: 121.6894 },
      { name: "Bagumbungan Ila", lat: 14.0257, lon: 121.6942 },
      { name: "Bantigue", lat: 13.9396, lon: 121.6944 },
      { name: "Bigo", lat: 13.9948, lon: 121.6485 },
      { name: "Binahaan", lat: 13.9898, lon: 121.7579 },
      { name: "Bukal", lat: 13.9728, lon: 121.6800 },
      { name: "Castillo (Poblacion)", lat: 13.9711, lon: 121.6831 },
      { name: "Daungan (Poblacion)", lat: 13.9683, lon: 121.6888 },
      { name: "Del Carmen", lat: 13.9685, lon: 121.6856 },
      { name: "Ikirin", lat: 13.9872, lon: 121.6900 },
      { name: "Malicboy Kan.", lat: 13.9689, lon: 121.7685 },
      { name: "Malicboy Sil.", lat: 13.9802, lon: 121.7908 },
      { name: "Mapagong", lat: 13.9679, lon: 121.6798 },
      { name: "Mayhay", lat: 13.9771, lon: 121.6842 },
      { name: "Palsabangon Iba", lat: 13.9893, lon: 121.7371 },
      { name: "Palsabangon Ila", lat: 14.0211, lon: 121.7242 },
      { name: "Parang", lat: 13.9710, lon: 121.6897 },
      { name: "Pinagbayanan", lat: 13.9690, lon: 121.7016 },
      { name: "Polo Iba", lat: 13.9055, lon: 121.7496 },
      { name: "Polo Ila", lat: 13.9313, lon: 121.7753 },
      { name: "Sta. Catalina", lat: 13.9711, lon: 121.6868 },
      { name: "Talipan", lat: 13.9628, lon: 121.6537 },
      { name: "Tambak", lat: 13.9729, lon: 121.6884 },
      { name: "Tukalan", lat: 14.0063, lon: 121.6754 },
    ];

    barangays.sort((a,b)=>a.name.localeCompare(b.name));

    const barangayGrid = document.getElementById("barangay-grid");

    async function fetchBarangayWeather(lat, lon) {
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,cloud_cover,precipitation_probability&daily=sunrise,sunset&timezone=Asia%2FSingapore`;
      const r = await fetch(url);
      if(!r.ok) throw new Error(`Weather error ${r.status}`);
      return r.json();
    }

    async function renderBarangays(){
      barangayGrid.innerHTML = '';
      for(const b of barangays){
        try{
          const data = await fetchBarangayWeather(b.lat,b.lon);
          const c = data.current || {};
          const d = data.daily || {};

          const temp = c.temperature_2m ? `${Math.round(c.temperature_2m)}Â°C`:'â€”';
          const humid = c.relative_humidity_2m ? `${Math.round(c.relative_humidity_2m)}%`:'â€”';
          const wind = c.wind_speed_10m ? `${c.wind_speed_10m.toFixed(1)} km/h`:'â€”';
          const cloud = c.cloud_cover ? `${Math.round(c.cloud_cover)}%`:'â€”';
          const rainChance = c.precipitation_probability!==undefined?`${Math.round(c.precipitation_probability)}%`:'â€”';
          const sunrise = d.sunrise ? fmtTimeISO(d.sunrise[0]):'â€”';
          const sunset = d.sunset ? fmtTimeISO(d.sunset[0]):'â€”';

          const mapUrl = `https://www.google.com/maps?q=${b.lat},${b.lon}`;
          const card = document.createElement('a');
          card.href = mapUrl;
          card.target = "_blank";
          card.className = "p-4 rounded-xl border bg-white shadow-sm block hover:shadow-md transition";
          card.innerHTML = `
            <div class="font-bold text-lg text-gray-800 mb-1">${b.name}</div>
            <div class="text-sm text-gray-500 mb-2">${b.lat.toFixed(4)}, ${b.lon.toFixed(4)}</div>
            <div class="grid grid-cols-2 gap-2 text-sm">
              <div>ğŸŒ¡ï¸ Temp: <strong>${temp}</strong></div>
              <div>ğŸ’§ Humidity: <strong>${humid}</strong></div>
              <div>ğŸŒ¬ï¸ Wind: <strong>${wind}</strong></div>
              <div>â˜ï¸ Cloud/Rain: <strong>${cloud} / ${rainChance}</strong></div>
              <div>ğŸŒ… Sunrise: <strong>${sunrise}</strong></div>
              <div>ğŸŒ‡ Sunset: <strong>${sunset}</strong></div>
            </div>
          `;
          barangayGrid.appendChild(card);
        }catch(err){
          console.error("Barangay weather failed", b.name, err);
          const card = document.createElement("div");
          card.className = "p-4 rounded-xl border bg-white shadow-sm text-center";
          card.innerHTML = `<div class="font-bold text-lg">${b.name}</div><div class="text-sm text-gray-500">Weather unavailable</div>`;
          barangayGrid.appendChild(card);
        }
      }
    }

    // Init
    (async function init(){
      await refreshWeather();
      await refreshSatellite();
      await renderBarangays();
      lucide.createIcons();
      setInterval(refreshWeather, WEATHER_UPDATE_MS);
      setInterval(refreshSatellite, SAT_UPDATE_MS);
      setInterval(()=>{document.getElementById('local-time').textContent=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});},60000);
      setInterval(renderBarangays, WEATHER_UPDATE_MS);
    })();
    
    
  </script>
  
  
</body>
</html>
